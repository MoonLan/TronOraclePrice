(window.webpackJsonp=window.webpackJsonp||[]).push([[168],{1563:function(e,n,t){var r=t(12),o=t(1564);t(764),t(1566),t(1567),t(1568),t(1569),r.registerPreprocessor(o)},1564:function(e,n,t){var r=t(1),o=["rect","polygon","keep","clear"];e.exports=function(option,e){var n=option&&option.brush;if(r.isArray(n)||(n=n?[n]:[]),n.length){var t=[];r.each(n,(function(e){var n=e.hasOwnProperty("toolbox")?e.toolbox:[];n instanceof Array&&(t=t.concat(n))}));var c=option&&option.toolbox;r.isArray(c)&&(c=c[0]),c||(c={feature:{}},option.toolbox=[c]);var h,map,l=c.feature||(c.feature={}),f=l.brush||(l.brush={}),d=f.type||(f.type=[]);d.push.apply(d,t),h=d,map={},r.each(h,(function(e){map[e]=1})),h.length=0,r.each(map,(function(e,n){h.push(n)})),e&&!d.length&&d.push.apply(d,o)}}},1565:function(e,n,t){var r=t(721),o=t(71),c=t(16).linePolygonIntersect;function h(e){var n=["x","y"],t=["width","height"];return{point:function(n,t,area){if(n){var r=area.range;return l(n[e],r)}},rect:function(r,o,area){if(r){var c=area.range,h=[r[n[e]],r[n[e]]+r[t[e]]];return h[1]<h[0]&&h.reverse(),l(h[0],c)||l(h[1],c)||l(c[0],h)||l(c[1],h)}}}}function l(p,e){return e[0]<=p&&p<=e[1]}var f={lineX:h(0),lineY:h(1),rect:{point:function(e,n,area){return e&&area.boundingRect.contain(e[0],e[1])},rect:function(e,n,area){return e&&area.boundingRect.intersect(e)}},polygon:{point:function(e,n,area){return e&&area.boundingRect.contain(e[0],e[1])&&r.contain(area.range,e[0],e[1])},rect:function(e,n,area){var t=area.range;if(!e||t.length<=1)return!1;var h=e.x,l=e.y,f=e.width,d=e.height,p=t[0];return!!(r.contain(t,h,l)||r.contain(t,h+f,l)||r.contain(t,h,l+d)||r.contain(t,h+f,l+d)||o.create(e).contain(p[0],p[1])||c(h,l,h+f,l,t)||c(h,l,h,l+d,t)||c(h+f,l,h+f,l+d,t)||c(h,l+d,h+f,l+d,t))||void 0}}};e.exports=f},1566:function(e,n,t){t(49).__DEV__;var r=t(12),o=t(1),c=t(358),h=t(81),l=["#ddd"];function f(option,e){return o.merge({brushType:option.brushType,brushMode:option.brushMode,transformable:option.transformable,brushStyle:new h(option.brushStyle).getItemStyle(),removeOnClick:option.removeOnClick,z:option.z},e,!0)}var d=r.extendComponentModel({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(e,n){var t=this.option;!n&&c.replaceVisualOption(t,e,["inBrush","outOfBrush"]);var r=t.inBrush=t.inBrush||{};t.outOfBrush=t.outOfBrush||{color:l},r.hasOwnProperty("liftZ")||(r.liftZ=5)},setAreas:function(e){e&&(this.areas=o.map(e,(function(area){return f(this.option,area)}),this))},setBrushOption:function(e){this.brushOption=f(this.option,e),this.brushType=this.brushOption.brushType}});e.exports=d},1567:function(e,n,t){var r=t(12),o=t(1),c=t(499),h=t(764).layoutCovers,l=r.extendComponentView({type:"brush",init:function(e,n){this.ecModel=e,this.api=n,this.model,(this._brushController=new c(n.getZr())).on("brush",o.bind(this._onBrush,this)).mount()},render:function(e){return this.model=e,f.apply(this,arguments)},updateTransform:function(e,n){return h(n),f.apply(this,arguments)},updateView:f,dispose:function(){this._brushController.dispose()},_onBrush:function(e,n){var t=this.model.id;this.model.brushTargetManager.setOutputRanges(e,this.ecModel),(!n.isEnd||n.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:t,areas:o.clone(e),$from:t}),n.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:t,areas:o.clone(e),$from:t})}});function f(e,n,t,r){(!r||r.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(t)).enableBrush(e.brushOption).updateCovers(e.areas.slice())}e.exports=l},1568:function(e,n,t){var r=t(12);r.registerAction({type:"brush",event:"brush"},(function(e,n){n.eachComponent({mainType:"brush",query:e},(function(n){n.setAreas(e.areas)}))})),r.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},(function(){})),r.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},(function(){}))},764:function(e,n,t){var r=t(12),o=t(1),c=t(71),h=t(358),l=t(1565),f=t(193),d=t(762),y=["inBrush","outOfBrush"],v="__ecBrushSelect",m="__ecInBrushSelectEvent",x=r.PRIORITY.VISUAL.BRUSH;function O(e){e.eachComponent({mainType:"brush"},(function(n){(n.brushTargetManager=new d(n.option,e)).setInputRanges(n.areas,e)}))}function I(e,n){if(!e.isDisposed()){var t=e.getZr();t[m]=!0,e.dispatchAction({type:"brushSelect",batch:n}),t[m]=!1}}function T(e,n,data,t){for(var i=0,r=n.length;i<r;i++){var area=n[i];if(e[area.brushType](t,data,area.selectors,area))return!0}}function B(e){var n=e.brushSelector;if(o.isString(n)){var t=[];return o.each(l,(function(e,r){t[r]=function(t,data,r,area){var o=data.getItemLayout(t);return e[n](o,r,area)}})),t}if(o.isFunction(n)){var r={};return o.each(l,(function(e,t){r[t]=n})),r}return n}r.registerLayout(x,(function(e,n,t){e.eachComponent({mainType:"brush"},(function(e){t&&"takeGlobalCursor"===t.type&&e.setBrushOption("brush"===t.key?t.brushOption:{brushType:!1})})),O(e)})),r.registerVisual(x,(function(e,n,t){var r,c,d=[];e.eachComponent({mainType:"brush"},(function(n,t){var f={brushId:n.id,brushIndex:t,brushName:n.name,areas:o.clone(n.areas),selected:[]};d.push(f);var v=n.option,m=v.brushLink,x=[],O=[],I=[],S=0;t||(r=v.throttleType,c=v.throttleDelay);var w=o.map(n.areas,(function(area){return function(area){var e=area.selectors={};return o.each(l[area.brushType],(function(n,t){e[t]=function(t){return n(t,e,area)}})),area}(o.defaults({boundingRect:A[area.brushType](area)},area))})),C=h.createVisualMappings(n.option,y,(function(e){e.mappingMethod="fixed"}));function _(e){return"all"===m||x[e]}function k(e){return!!e.length}o.isArray(m)&&o.each(m,(function(e){x[e]=1})),e.eachSeries((function(t,r){var c=I[r]=[];"parallel"===t.subType?function(e,n){var t=e.coordinateSystem;S|=t.hasAxisBrushed(),_(n)&&t.eachActiveState(e.getData(),(function(e,n){"active"===e&&(O[n]=1)}))}(t,r):function(t,r,c){var h=B(t);if(!h||function(e,n){var t=e.option.seriesIndex;return null!=t&&"all"!==t&&(o.isArray(t)?o.indexOf(t,n)<0:n!==t)}(n,r))return;if(o.each(w,(function(area){h[area.brushType]&&n.brushTargetManager.controlSeries(area,t,e)&&c.push(area),S|=k(c)})),_(r)&&k(c)){var data=t.getData();data.each((function(e){T(h,c,data,e)&&(O[e]=1)}))}}(t,r,c)})),e.eachSeries((function(e,n){var t={seriesId:e.id,seriesIndex:n,seriesName:e.name,dataIndex:[]};f.selected.push(t);var r=B(e),o=I[n],data=e.getData(),c=_(n)?function(e){return O[e]?(t.dataIndex.push(data.getRawIndex(e)),"inBrush"):"outOfBrush"}:function(e){return T(r,o,data,e)?(t.dataIndex.push(data.getRawIndex(e)),"inBrush"):"outOfBrush"};(_(n)?S:k(o))&&h.applyVisual(y,C,data,c)}))})),function(e,n,t,r,o){if(!o)return;var c=e.getZr();if(c[m])return;c.__ecBrushSelect||(c.__ecBrushSelect=I);f.createOrUpdate(c,v,t,n)(e,r)}(n,r,c,d,t)}));var A={lineX:o.noop,lineY:o.noop,rect:function(area){return S(area.range)},polygon:function(area){for(var e,n=area.range,i=0,t=n.length;i<t;i++){e=e||[[1/0,-1/0],[1/0,-1/0]];var r=n[i];r[0]<e[0][0]&&(e[0][0]=r[0]),r[0]>e[0][1]&&(e[0][1]=r[0]),r[1]<e[1][0]&&(e[1][0]=r[1]),r[1]>e[1][1]&&(e[1][1]=r[1])}return e&&S(e)}};function S(e){return new c(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}n.layoutCovers=O}}]);
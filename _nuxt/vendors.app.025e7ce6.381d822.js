(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{1391:function(t,e,n){var r=n(1),o=n(34).parsePercent,d=n(169).isDimensionStacked;function h(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function c(t,e){return e.dim+t.model.componentIndex}var m=function(t,e,n){var m={},f=function(t,e){var n={};r.each(t,(function(t,e){var data=t.getData(),r=t.coordinateSystem,d=r.getBaseAxis(),m=c(r,d),f=d.getExtent(),l="category"===d.type?d.getBandWidth():Math.abs(f[1]-f[0])/data.count(),y=n[m]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},v=y.stacks;n[m]=y;var x=h(t);v[x]||y.autoWidthCount++,v[x]=v[x]||{width:0,maxWidth:0};var W=o(t.get("barWidth"),l),w=o(t.get("barMaxWidth"),l),M=t.get("barGap"),S=t.get("barCategoryGap");W&&!v[x].width&&(W=Math.min(y.remainedWidth,W),v[x].width=W,y.remainedWidth-=W),w&&(v[x].maxWidth=w),null!=M&&(y.gap=M),null!=S&&(y.categoryGap=S)}));var d={};return r.each(n,(function(t,e){d[e]={};var n=t.stacks,h=t.bandWidth,c=o(t.categoryGap,h),m=o(t.gap,1),f=t.remainedWidth,l=t.autoWidthCount,y=(f-c)/(l+(l-1)*m);y=Math.max(y,0),r.each(n,(function(t,e){var n=t.maxWidth;n&&n<y&&(n=Math.min(n,f),t.width&&(n=Math.min(n,t.width)),f-=n,t.width=n,l--)})),y=(f-c)/(l+(l-1)*m),y=Math.max(y,0);var v,x=0;r.each(n,(function(t,e){t.width||(t.width=y),v=t,x+=t.width*(1+m)})),v&&(x-=v.width*m);var W=-x/2;r.each(n,(function(t,n){d[e][n]=d[e][n]||{offset:W,width:t.width},W+=t.width*(1+m)}))})),d}(r.filter(e.getSeriesByType(t),(function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type})));e.eachSeriesByType(t,(function(t){if("polar"===t.coordinateSystem.type){var data=t.getData(),e=t.coordinateSystem,n=e.getBaseAxis(),r=c(e,n),o=h(t),l=f[r][o],y=l.offset,v=l.width,x=e.getOtherAxis(n),W=t.coordinateSystem.cx,w=t.coordinateSystem.cy,M=t.get("barMinHeight")||0,S=t.get("barMinAngle")||0;m[o]=m[o]||[];for(var k=data.mapDimension(x.dim),A=data.mapDimension(n.dim),C=d(data,k),D="radius"!==n.dim||!t.get("roundCap",!0),N="radius"===x.dim?x.dataToRadius(0):x.dataToAngle(0),T=0,G=data.count();T<G;T++){var B,I,P,L,_=data.get(k,T),H=data.get(A,T),O=_>=0?"p":"n",R=N;if(C&&(m[o][H]||(m[o][H]={p:N,n:N}),R=m[o][H][O]),"radius"===x.dim){var z=x.dataToRadius(_)-N,F=n.dataToAngle(H);Math.abs(z)<M&&(z=(z<0?-1:1)*M),B=R,I=R+z,L=(P=F-y)-v,C&&(m[o][H][O]=I)}else{var E=x.dataToAngle(_,D)-N,K=n.dataToRadius(H);Math.abs(E)<S&&(E=(E<0?-1:1)*S),I=(B=K+y)+v,P=R,L=R+E,C&&(m[o][H][O]=L)}data.setItemLayout(T,{cx:W,cy:w,r0:B,r:I,startAngle:-P*Math.PI/180,endAngle:-L*Math.PI/180})}}}),this)};t.exports=m},291:function(t,e,n){var map=n(1).map,r=n(240),o=n(169).isDimensionStacked;t.exports=function(t){return{seriesType:t,plan:r(),reset:function(t){var data=t.getData(),e=t.coordinateSystem,n=t.pipelineContext.large;if(e){var r=map(e.dimensions,(function(t){return data.mapDimension(t)})).slice(0,2),d=r.length,h=data.getCalculationInfo("stackResultDimension");return o(data,r[0])&&(r[0]=h),o(data,r[1])&&(r[1]=h),d&&{progress:function(t,data){for(var o=t.end-t.start,h=n&&new Float32Array(o*d),i=t.start,c=0,m=[],f=[];i<t.end;i++){var l;if(1===d){var y=data.get(r[0],i);l=!isNaN(y)&&e.dataToPoint(y,null,f)}else{y=m[0]=data.get(r[0],i);var v=m[1]=data.get(r[1],i);l=!isNaN(y)&&!isNaN(v)&&e.dataToPoint(m,null,f)}n?(h[c++]=l?l[0]:NaN,h[c++]=l?l[1]:NaN):data.setItemLayout(i,l&&l.slice()||[NaN,NaN])}n&&data.setLayout("symbolPoints",h)}}}}}}},349:function(t,e,n){var r=n(1),o=n(34).parsePercent,d=n(169).isDimensionStacked,h=n(240),c="__ec_stack_",m="undefined"!=typeof Float32Array?Float32Array:Array;function f(t){return t.get("stack")||c+t.seriesIndex}function l(t){return t.dim+t.index}function y(t,e){var n=[];return e.eachSeriesByType(t,(function(t){M(t)&&!S(t)&&n.push(t)})),n}function v(t){var e=function(t){var e={};r.each(t,(function(t){var n=t.coordinateSystem.getBaseAxis();if("time"===n.type||"value"===n.type)for(var data=t.getData(),r=n.dim+"_"+n.index,o=data.mapDimension(n.dim),i=0,d=data.count();i<d;++i){var h=data.get(o,i);e[r]?e[r].push(h):e[r]=[h]}}));var n=[];for(var o in e)if(e.hasOwnProperty(o)){var d=e[o];if(d){d.sort((function(a,b){return a-b}));for(var h=null,c=1;c<d.length;++c){var m=d[c]-d[c-1];m>0&&(h=null===h?m:Math.min(h,m))}n[o]=h}}return n}(t),n=[];return r.each(t,(function(t){var r,d=t.coordinateSystem.getBaseAxis(),h=d.getExtent();if("category"===d.type)r=d.getBandWidth();else if("value"===d.type||"time"===d.type){var c=d.dim+"_"+d.index,m=e[c],y=Math.abs(h[1]-h[0]),v=d.scale.getExtent(),x=Math.abs(v[1]-v[0]);r=m?y/x*m:y}else{var data=t.getData();r=Math.abs(h[1]-h[0])/data.count()}var W=o(t.get("barWidth"),r),w=o(t.get("barMaxWidth"),r),M=o(t.get("barMinWidth")||1,r),S=t.get("barGap"),k=t.get("barCategoryGap");n.push({bandWidth:r,barWidth:W,barMaxWidth:w,barMinWidth:M,barGap:S,barCategoryGap:k,axisKey:l(d),stackId:f(t)})})),x(n)}function x(t){var e={};r.each(t,(function(t,n){var r=t.axisKey,o=t.bandWidth,d=e[r]||{bandWidth:o,remainedWidth:o,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},h=d.stacks;e[r]=d;var c=t.stackId;h[c]||d.autoWidthCount++,h[c]=h[c]||{width:0,maxWidth:0};var m=t.barWidth;m&&!h[c].width&&(h[c].width=m,m=Math.min(d.remainedWidth,m),d.remainedWidth-=m);var f=t.barMaxWidth;f&&(h[c].maxWidth=f);var l=t.barMinWidth;l&&(h[c].minWidth=l);var y=t.barGap;null!=y&&(d.gap=y);var v=t.barCategoryGap;null!=v&&(d.categoryGap=v)}));var n={};return r.each(e,(function(t,e){n[e]={};var d=t.stacks,h=t.bandWidth,c=o(t.categoryGap,h),m=o(t.gap,1),f=t.remainedWidth,l=t.autoWidthCount,y=(f-c)/(l+(l-1)*m);y=Math.max(y,0),r.each(d,(function(t){var e=t.maxWidth,n=t.minWidth;if(t.width){r=t.width;e&&(r=Math.min(r,e)),n&&(r=Math.max(r,n)),t.width=r,f-=r+m*r,l--}else{var r=y;e&&e<r&&(r=Math.min(e,f)),n&&n>r&&(r=n),r!==y&&(t.width=r,f-=r+m*r,l--)}})),y=(f-c)/(l+(l-1)*m),y=Math.max(y,0);var v,x=0;r.each(d,(function(t,e){t.width||(t.width=y),v=t,x+=t.width*(1+m)})),v&&(x-=v.width*m);var W=-x/2;r.each(d,(function(t,r){n[e][r]=n[e][r]||{bandWidth:h,offset:W,width:t.width},W+=t.width*(1+m)}))})),n}function W(t,e,n){if(t&&e){var r=t[l(e)];return null!=r&&null!=n&&(r=r[f(n)]),r}}var w={seriesType:"bar",plan:h(),reset:function(t){if(M(t)&&S(t)){var data=t.getData(),e=t.coordinateSystem,n=e.grid.getRect(),r=e.getBaseAxis(),o=e.getOtherAxis(r),d=data.mapDimension(o.dim),h=data.mapDimension(r.dim),c=o.isHorizontal(),f=c?0:1,l=W(v([t]),r,t).width;return l>.5||(l=.5),{progress:function(t,data){var y,v=t.count,x=new m(2*v),W=new m(2*v),w=new m(v),M=[],S=[],A=0,C=0;for(;null!=(y=t.next());)S[f]=data.get(d,y),S[1-f]=data.get(h,y),M=e.dataToPoint(S,null,M),W[A]=c?n.x+n.width:M[0],x[A++]=M[0],W[A]=c?M[1]:n.y+n.height,x[A++]=M[1],w[C++]=y;data.setLayout({largePoints:x,largeDataIndices:w,largeBackgroundPoints:W,barWidth:l,valueAxisStart:k(r,o,!1),backgroundStart:c?n.x:n.y,valueAxisHorizontal:c})}}}}};function M(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function S(t){return t.pipelineContext&&t.pipelineContext.large}function k(t,e,n){return e.toGlobalCoord(e.dataToCoord("log"===e.type?1:0))}e.getLayoutOnAxis=function(t){var e=[],n=t.axis,o="axis0";if("category"===n.type){for(var d=n.getBandWidth(),i=0;i<t.count;i++)e.push(r.defaults({bandWidth:d,axisKey:o,stackId:c+i},t));var h=x(e),m=[];for(i=0;i<t.count;i++){var f=h.axis0[c+i];f.offsetCenter=f.offset+f.width/2,m.push(f)}return m}},e.prepareLayoutBarSeries=y,e.makeColumnLayout=v,e.retrieveColumnLayout=W,e.layout=function(t,e){var n=y(t,e),o=v(n),h={},c={};r.each(n,(function(t){var data=t.getData(),e=t.coordinateSystem,n=e.getBaseAxis(),r=f(t),m=o[l(n)][r],y=m.offset,v=m.width,x=e.getOtherAxis(n),W=t.get("barMinHeight")||0;h[r]=h[r]||[],c[r]=c[r]||[],data.setLayout({bandWidth:m.bandWidth,offset:y,size:v});for(var w=data.mapDimension(x.dim),M=data.mapDimension(n.dim),S=d(data,w),A=x.isHorizontal(),C=k(n,x,S),D=0,N=data.count();D<N;D++){var T,G,B,I,P,L=data.get(w,D),_=data.get(M,D),H=L>=0?"p":"n",O=C;if(S&&(h[r][_]||(h[r][_]={p:C,n:C}),O=h[r][_][H]),A)T=O,G=(P=e.dataToPoint([L,_]))[1]+y,B=P[0]-C,I=v,Math.abs(B)<W&&(B=(B<0?-1:1)*W),isNaN(B)||S&&(h[r][_][H]+=B);else T=(P=e.dataToPoint([_,L]))[0]+y,G=O,B=v,I=P[1]-C,Math.abs(I)<W&&(I=(I<=0?-1:1)*W),isNaN(I)||S&&(h[r][_][H]+=I);data.setItemLayout(D,{x:T,y:G,width:B,height:I})}}),this)},e.largeLayout=w}}]);
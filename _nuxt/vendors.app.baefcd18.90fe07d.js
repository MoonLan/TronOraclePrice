(window.webpackJsonp=window.webpackJsonp||[]).push([[141],{1601:function(e,t,n){n(770),n(779)},1602:function(e,t,n){var o=n(1),r=n(774),l=n(34),h=[20,140],c=r.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(e,t){c.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual((function(e){e.mappingMethod="linear",e.dataExtent=this.getExtent()})),this._resetRange()},resetItemSize:function(){c.superApply(this,"resetItemSize",arguments);var e=this.itemSize;"horizontal"===this._orient&&e.reverse(),(null==e[0]||isNaN(e[0]))&&(e[0]=h[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=h[1])},_resetRange:function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):o.isArray(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},completeVisualOption:function(){r.prototype.completeVisualOption.apply(this,arguments),o.each(this.stateList,(function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=0)}),this)},setSelected:function(e){this.option.range=e.slice(),this._resetRange()},getSelected:function(){var e=this.getExtent(),t=l.asc((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},getValueState:function(e){var t=this.option.range,n=this.getExtent();return(t[0]<=n[0]||t[0]<=e)&&(t[1]>=n[1]||e<=t[1])?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries((function(n){var o=[],data=n.getData();data.each(this.getDataDimension(data),(function(t,n){e[0]<=t&&t<=e[1]&&o.push(n)}),this),t.push({seriesId:n.id,dataIndex:o})}),this),t},getVisualMeta:function(e){var t=d(this,"outOfRange",this.getExtent()),n=d(this,"inRange",this.option.range.slice()),o=[];function r(t,n){o.push({value:t,color:e(t,n)})}for(var l=0,h=0,c=n.length,v=t.length;h<v&&(!n.length||t[h]<=n[0]);h++)t[h]<n[l]&&r(t[h],"outOfRange");for(var f=1;l<c;l++,f=0)f&&o.length&&r(n[l],"outOfRange"),r(n[l],"inRange");for(f=1;h<v;h++)(!n.length||n[n.length-1]<t[h])&&(f&&(o.length&&r(o[o.length-1].value,"outOfRange"),f=0),r(t[h],"outOfRange"));var m=o.length;return{stops:o,outerColors:[m?o[0].color:"transparent",m?o[m-1].color:"transparent"]}}});function d(e,t,n){if(n[0]===n[1])return n.slice();for(var o=(n[1]-n[0])/200,r=n[0],l=[],i=0;i<=200&&r<n[1];i++)l.push(r),r+=o;return l.push(n[1]),l}var v=c;e.exports=v},1603:function(e,t,n){var o=n(1),r=n(481),l=n(166),h=n(776),c=n(16),d=n(34),v=n(244),f=n(777),m=n(42),_=d.linearMap,x=o.each,y=Math.min,M=Math.max,S=h.extend({type:"visualMap.continuous",init:function(){S.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,this._useHandle,this._hoverLinkDataIndices=[],this._dragging,this._hovering},doRender:function(e,t,n,o){o&&"selectDataRange"===o.type&&o.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var n=e.get("text");this._renderEndsText(t,n,0),this._renderEndsText(t,n,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},_renderEndsText:function(e,t,n){if(t){var text=t[1-n];text=null!=text?text+"":"";var o=this.visualMapModel,r=o.get("textGap"),l=o.itemSize,h=this._shapes.barGroup,d=this._applyTransform([l[0]/2,0===n?-r:l[1]+r],h),v=this._applyTransform(0===n?"bottom":"top",h),f=this._orient,m=this.visualMapModel.textStyleModel;this.group.add(new c.Text({style:{x:d[0],y:d[1],textVerticalAlign:"horizontal"===f?"middle":v,textAlign:"horizontal"===f?v:"center",text:text,textFont:m.getFont(),textFill:m.getTextColor()}}))}},_renderBar:function(e){var t=this.visualMapModel,n=this._shapes,r=t.itemSize,l=this._orient,h=this._useHandle,c=f.getItemAlign(t,this.api,r),d=n.barGroup=this._createBarGroup(c);d.add(n.outOfRange=L()),d.add(n.inRange=L(null,h?T(this._orient):null,o.bind(this._dragHandle,this,"all",!1),o.bind(this._dragHandle,this,"all",!0)));var v=t.textStyleModel.getTextRect("å›½"),m=M(v.width,v.height);h&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(d,0,r,m,l,c),this._createHandle(d,1,r,m,l,c)),this._createIndicator(d,r,m,l),e.add(d)},_createHandle:function(e,t,n,r,h){var d=o.bind(this._dragHandle,this,t,!1),v=o.bind(this._dragHandle,this,t,!0),f=L(function(e,t){return 0===e?[[0,0],[t,0],[t,-t]]:[[0,0],[t,0],[t,t]]}(t,r),T(this._orient),d,v);f.position[0]=n[0],e.add(f);var m=this.visualMapModel.textStyleModel,_=new c.Text({draggable:!0,drift:d,onmousemove:function(e){l.stop(e.event)},ondragend:v,style:{x:0,y:0,text:"",textFont:m.getFont(),textFill:m.getTextColor()}});this.group.add(_);var x=["horizontal"===h?r/2:1.5*r,"horizontal"===h?0===t?-1.5*r:1.5*r:0===t?-r/2:r/2],y=this._shapes;y.handleThumbs[t]=f,y.handleLabelPoints[t]=x,y.handleLabels[t]=_},_createIndicator:function(e,t,n,o){var r=L([[0,0]],"move");r.position[0]=t[0],r.attr({invisible:!0,silent:!0}),e.add(r);var l=this.visualMapModel.textStyleModel,h=new c.Text({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:l.getFont(),textFill:l.getTextColor()}});this.group.add(h);var d=["horizontal"===o?n/2:9,0],v=this._shapes;v.indicator=r,v.indicatorLabel=h,v.indicatorLabelPoint=d},_dragHandle:function(e,t,n,o){if(this._useHandle){if(this._dragging=!t,!t){var r=this._applyTransform([n,o],this._shapes.barGroup,!0);this._updateInterval(e,r[1]),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?!this._hovering&&this._clearHoverLinkToSeries():V(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},_resetInterval:function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),n=e.getExtent(),o=[0,e.itemSize[1]];this._handleEnds=[_(t[0],n,o,!0),_(t[1],n,o,!0)]},_updateInterval:function(e,t){t=t||0;var n=this.visualMapModel,o=this._handleEnds,r=[0,n.itemSize[1]];v(t,o,r,e,0);var l=n.getExtent();this._dataInterval=[_(o[0],r,l,!0),_(o[1],r,l,!0)]},_updateView:function(e){var t=this.visualMapModel,n=t.getExtent(),o=this._shapes,r=[0,t.itemSize[1]],l=e?r:this._handleEnds,h=this._createBarVisual(this._dataInterval,n,l,"inRange"),c=this._createBarVisual(n,n,r,"outOfRange");o.inRange.setStyle({fill:h.barColor,opacity:h.opacity}).setShape("points",h.barPoints),o.outOfRange.setStyle({fill:c.barColor,opacity:c.opacity}).setShape("points",c.barPoints),this._updateHandle(l,h)},_createBarVisual:function(e,t,n,o){var l={forceState:o,convertOpacityToAlpha:!0},h=this._makeColorGradient(e,l),c=[this.getControllerVisual(e[0],"symbolSize",l),this.getControllerVisual(e[1],"symbolSize",l)],d=this._createBarPoints(n,c);return{barColor:new r(0,0,0,1,h),barPoints:d,handlesColor:[h[0].color,h[h.length-1].color]}},_makeColorGradient:function(e,t){var n=[],o=(e[1]-e[0])/100;n.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var i=1;i<100;i++){var r=e[0]+o*i;if(r>e[1])break;n.push({color:this.getControllerVisual(r,"color",t),offset:i/100})}return n.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),n},_createBarPoints:function(e,t){var n=this.visualMapModel.itemSize;return[[n[0]-t[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-t[1],e[1]]]},_createBarGroup:function(e){var t=this._orient,n=this.visualMapModel.get("inverse");return new c.Group("horizontal"!==t||n?"horizontal"===t&&n?{scale:"bottom"===e?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==t||n?{scale:"left"===e?[1,1]:[-1,1]}:{scale:"left"===e?[1,-1]:[-1,-1]}:{scale:"bottom"===e?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(e,t){if(this._useHandle){var n=this._shapes,o=this.visualMapModel,r=n.handleThumbs,l=n.handleLabels;x([0,1],(function(h){var d=r[h];d.setStyle("fill",t.handlesColor[h]),d.position[1]=e[h];var v=c.applyTransform(n.handleLabelPoints[h],c.getTransform(d,this.group));l[h].setStyle({x:v[0],y:v[1],text:o.formatValueText(this._dataInterval[h]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===h?"bottom":"top":"left",n.barGroup)})}),this)}},_showIndicator:function(e,t,n,o){var r=this.visualMapModel,l=r.getExtent(),h=r.itemSize,d=[0,h[1]],v=_(e,l,d,!0),f=this._shapes,m=f.indicator;if(m){m.position[1]=v,m.attr("invisible",!1),m.setShape("points",function(e,t,n,o){return e?[[0,-y(t,M(n,0))],[6,0],[0,y(t,M(o-n,0))]]:[[0,0],[5,-5],[5,5]]}(!!n,o,v,h[1]));var x=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0});m.setStyle("fill",x);var S=c.applyTransform(f.indicatorLabelPoint,c.getTransform(m,this.group)),L=f.indicatorLabel;L.attr("invisible",!1);var V=this._applyTransform("left",f.barGroup),T=this._orient;L.setStyle({text:(n||"")+r.formatValueText(t),textVerticalAlign:"horizontal"===T?V:"middle",textAlign:"horizontal"===T?"center":V,x:S[0],y:S[1]})}},_enableHoverLinkToSeries:function(){var e=this;this._shapes.barGroup.on("mousemove",(function(t){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,o=e._applyTransform([t.offsetX,t.offsetY],e._shapes.barGroup,!0,!0);o[1]=y(M(0,o[1]),n[1]),e._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=n[0])}})).on("mouseout",(function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()}))},_enableHoverLinkFromSeries:function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(e,t){var n=this.visualMapModel,o=n.itemSize;if(n.option.hoverLink){var r=[0,o[1]],l=n.getExtent();e=y(M(r[0],e),r[1]);var h=function(e,t,n){var o=6,r=e.get("hoverLinkDataSize");r&&(o=_(r,t,n,!0)/2);return o}(n,l,r),c=[e-h,e+h],d=_(e,r,l,!0),v=[_(c[0],r,l,!0),_(c[1],r,l,!0)];c[0]<r[0]&&(v[0]=-1/0),c[1]>r[1]&&(v[1]=1/0),t&&(v[0]===-1/0?this._showIndicator(d,v[1],"< ",h):v[1]===1/0?this._showIndicator(d,v[0],"> ",h):this._showIndicator(d,d,"â‰ˆ ",h));var x=this._hoverLinkDataIndices,S=[];(t||V(n))&&(S=this._hoverLinkDataIndices=n.findTargetDataIndices(v));var L=m.compressBatches(x,S);this._dispatchHighDown("downplay",f.makeHighDownBatch(L[0],n)),this._dispatchHighDown("highlight",f.makeHighDownBatch(L[1],n))}},_hoverLinkFromSeriesMouseOver:function(e){var t=e.target,n=this.visualMapModel;if(t&&null!=t.dataIndex){var o=this.ecModel.getSeriesByIndex(t.seriesIndex);if(n.isTargetSeries(o)){var data=o.getData(t.dataType),r=data.get(n.getDataDimension(data),t.dataIndex,!0);isNaN(r)||this._showIndicator(r,r)}}},_hideIndicator:function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",f.makeHighDownBatch(e,this.visualMapModel)),e.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},_applyTransform:function(e,element,t,n){var r=c.getTransform(element,n?null:this.group);return c[o.isArray(e)?"applyTransform":"transformDirection"](e,r,t)},_dispatchHighDown:function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function L(e,cursor,t,n){return new c.Polygon({shape:{points:e},draggable:!!t,cursor:cursor,drift:t,onmousemove:function(e){l.stop(e.event)},ondragend:n})}function V(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function T(e){return"vertical"===e?"ns-resize":"ew-resize"}var I=S;e.exports=I},1604:function(e,t,n){n(49).__DEV__;var o=n(1),r=n(774),l=n(224),h=n(775),c=n(34).reformIntervals,d=r.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(e,t){d.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();v[this._mode].call(this),this._resetSelected(e,t);var r=this.option.categories;this.resetVisual((function(e,t){"categories"===n?(e.mappingMethod="category",e.categories=o.clone(r)):(e.dataExtent=this.getExtent(),e.mappingMethod="piecewise",e.pieceList=o.map(this._pieceList,(function(e){e=o.clone(e);return"inRange"!==t&&(e.visual=null),e})))}))},completeVisualOption:function(){var option=this.option,e={},t=l.listVisualTypes(),n=this.isCategory();function c(e,t,n){return e&&e[t]&&(o.isObject(e[t])?e[t].hasOwnProperty(n):e[t]===n)}o.each(option.pieces,(function(n){o.each(t,(function(t){n.hasOwnProperty(t)&&(e[t]=1)}))})),o.each(e,(function(e,t){var r=0;o.each(this.stateList,(function(e){r|=c(option,e,t)||c(option.target,e,t)}),this),!r&&o.each(this.stateList,(function(e){(option[e]||(option[e]={}))[t]=h.get(t,"inRange"===e?"active":"inactive",n)}))}),this),r.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(e,t){var n=this.option,r=this._pieceList,l=(t?n:e).selected||{};if(n.selected=l,o.each(r,(function(e,t){var n=this.getSelectedMapKey(e);l.hasOwnProperty(n)||(l[n]=!0)}),this),"single"===n.selectedMode){var h=!1;o.each(r,(function(e,t){var n=this.getSelectedMapKey(e);l[n]&&(h?l[n]=!1:h=!0)}),this)}},getSelectedMapKey:function(e){return"categories"===this._mode?e.value+"":e.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var option=this.option;return option.pieces&&option.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(e){this.option.selected=o.clone(e)},getValueState:function(e){var t=l.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries((function(n){var o=[],data=n.getData();data.each(this.getDataDimension(data),(function(t,n){l.findPieceIndex(t,this._pieceList)===e&&o.push(n)}),this),t.push({seriesId:n.id,dataIndex:o})}),this),t},getRepresentValue:function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var n=e.interval||[];t=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return t},getVisualMeta:function(e){if(!this.isCategory()){var t=[],n=[],r=this,l=this._pieceList.slice();if(l.length){var h=l[0].interval[0];h!==-1/0&&l.unshift({interval:[-1/0,h]}),(h=l[l.length-1].interval[1])!==1/0&&l.push({interval:[h,1/0]})}else l.push({interval:[-1/0,1/0]});var c=-1/0;return o.each(l,(function(e){var t=e.interval;t&&(t[0]>c&&d([c,t[0]],"outOfRange"),d(t.slice()),c=t[1])}),this),{stops:t,outerColors:n}}function d(o,l){var h=r.getRepresentValue({interval:o});l||(l=r.getValueState(h));var c=e(h,l);o[0]===-1/0?n[0]=c:o[1]===1/0?n[1]=c:t.push({value:o[0],color:c},{value:o[1],color:c})}}}),v={splitNumber:function(){var e=this.option,t=this._pieceList,n=Math.min(e.precision,20),r=this.getExtent(),l=e.splitNumber;l=Math.max(parseInt(l,10),1),e.splitNumber=l;for(var h=(r[1]-r[0])/l;+h.toFixed(n)!==h&&n<5;)n++;e.precision=n,h=+h.toFixed(n),e.minOpen&&t.push({interval:[-1/0,r[0]],close:[0,0]});for(var d=0,v=r[0];d<l;v+=h,d++){var f=d===l-1?r[1]:v+h;t.push({interval:[v,f],close:[1,1]})}e.maxOpen&&t.push({interval:[r[1],1/0],close:[0,0]}),c(t),o.each(t,(function(e,t){e.index=t,e.text=this.formatValueText(e.interval)}),this)},categories:function(){var e=this.option;o.each(e.categories,(function(e){this._pieceList.push({text:this.formatValueText(e,!0),value:e})}),this),f(e,this._pieceList)},pieces:function(){var e=this.option,t=this._pieceList;o.each(e.pieces,(function(e,n){o.isObject(e)||(e={value:e});var r={text:"",index:n};if(null!=e.label&&(r.text=e.label),e.hasOwnProperty("value")){var h=r.value=e.value;r.interval=[h,h],r.close=[1,1]}else{for(var c=r.interval=[],d=r.close=[0,0],v=[1,0,1],f=[-1/0,1/0],m=[],_=0;_<2;_++){for(var x=[["gte","gt","min"],["lte","lt","max"]][_],i=0;i<3&&null==c[_];i++)c[_]=e[x[i]],d[_]=v[i],m[_]=2===i;null==c[_]&&(c[_]=f[_])}m[0]&&c[1]===1/0&&(d[0]=0),m[1]&&c[0]===-1/0&&(d[1]=0),c[0]===c[1]&&d[0]&&d[1]&&(r.value=c[0])}r.visual=l.retrieveVisuals(e),t.push(r)}),this),f(e,t),c(t),o.each(t,(function(e){var t=e.close,n=[["<","â‰¤"][t[1]],[">","â‰¥"][t[0]]];e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,n)}),this)}};function f(e,t){var n=e.inverse;("vertical"===e.orient?!n:n)&&t.reverse()}var m=d;e.exports=m},1605:function(e,t,n){var o=n(1),r=n(776),l=n(16),h=n(148).createSymbol,c=n(59),d=n(777),v=r.extend({type:"visualMap.piecewise",doRender:function(){var e=this.group;e.removeAll();var t=this.visualMapModel,n=t.get("textGap"),r=t.textStyleModel,h=r.getFont(),d=r.getTextColor(),v=this._getItemAlign(),f=t.itemSize,m=this._getViewData(),_=m.endsText,x=o.retrieve(t.get("showLabel",!0),!_);_&&this._renderEndsText(e,_[0],f,x,v),o.each(m.viewPieceList,(function(r){var c=r.piece,m=new l.Group;m.onclick=o.bind(this._onItemClick,this,c),this._enableHoverLink(m,r.indexInModelPieceList);var _=t.getRepresentValue(c);if(this._createItemSymbol(m,_,[0,0,f[0],f[1]]),x){var y=this.visualMapModel.getValueState(_);m.add(new l.Text({style:{x:"right"===v?-n:f[0]+n,y:f[1]/2,text:c.text,textVerticalAlign:"middle",textAlign:v,textFont:h,textFill:d,opacity:"outOfRange"===y?.5:1}}))}e.add(m)}),this),_&&this._renderEndsText(e,_[1],f,x,v),c.box(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},_enableHoverLink:function(e,t){function n(e){var n=this.visualMapModel;n.option.hoverLink&&this.api.dispatchAction({type:e,batch:d.makeHighDownBatch(n.findTargetDataIndices(t),n)})}e.on("mouseover",o.bind(n,this,"highlight")).on("mouseout",o.bind(n,this,"downplay"))},_getItemAlign:function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return d.getItemAlign(e,this.api,e.itemSize);var n=t.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(e,text,t,n,o){if(text){var r=new l.Group,h=this.visualMapModel.textStyleModel;r.add(new l.Text({style:{x:n?"right"===o?t[0]:0:t[0]/2,y:t[1]/2,textVerticalAlign:"middle",textAlign:n?o:"center",text:text,textFont:h.getFont(),textFill:h.getTextColor()}})),e.add(r)}},_getViewData:function(){var e=this.visualMapModel,t=o.map(e.getPieceList(),(function(e,t){return{piece:e,indexInModelPieceList:t}})),n=e.get("text"),r=e.get("orient"),l=e.get("inverse");return("horizontal"===r?l:!l)?t.reverse():n&&(n=n.slice().reverse()),{viewPieceList:t,endsText:n}},_createItemSymbol:function(e,t,n){e.add(h(this.getControllerVisual(t,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(t,"color")))},_onItemClick:function(e){var t=this.visualMapModel,option=t.option,n=o.clone(option.selected),r=t.getSelectedMapKey(e);"single"===option.selectedMode?(n[r]=!0,o.each(n,(function(e,t){n[t]=t===r}))):n[r]=!n[r],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:n})}});e.exports=v},770:function(e,t,n){var o=n(12),r=n(771);n(772),n(773),n(1602),n(1603),n(778),o.registerPreprocessor(r)},771:function(e,t,n){var o=n(1),r=o.each;function l(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}e.exports=function(option){var e=option&&option.visualMap;o.isArray(e)||(e=e?[e]:[]),r(e,(function(e){if(e){l(e,"splitList")&&!l(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&o.isArray(t)&&r(t,(function(e){o.isObject(e)&&(l(e,"start")&&!l(e,"min")&&(e.min=e.start),l(e,"end")&&!l(e,"max")&&(e.max=e.end))}))}}))}},772:function(e,t,n){n(86).registerSubTypeDefaulter("visualMap",(function(option){return option.categories||(option.pieces?option.pieces.length>0:option.splitNumber>0)&&!option.calculable?"piecewise":"continuous"}))},773:function(e,t,n){var o=n(12),r=n(1),l=n(358),h=n(224),c=o.PRIORITY.VISUAL.COMPONENT;function d(e,t,n,o){for(var r=t.targetVisuals[o],l=h.prepareVisualTypes(r),c={color:e.getData().getVisual("color")},i=0,d=l.length;i<d;i++){var v=l[i],f=r["opacity"===v?"__alphaForOpacity":v];f&&f.applyVisual(n,m,_)}return c.color;function m(e){return c[e]}function _(e,t){c[e]=t}}o.registerVisual(c,{createOnAllSeries:!0,reset:function(e,t){var n=[];return t.eachComponent("visualMap",(function(t){var o=e.pipelineContext;!t.isTargetSeries(e)||o&&o.large||n.push(l.incrementalApplyVisual(t.stateList,t.targetVisuals,r.bind(t.getValueState,t),t.getDataDimension(e.getData())))})),n}}),o.registerVisual(c,{createOnAllSeries:!0,reset:function(e,t){var data=e.getData(),n=[];t.eachComponent("visualMap",(function(t){if(t.isTargetSeries(e)){var o=t.getVisualMeta(r.bind(d,null,e,t))||{stops:[],outerColors:[]},l=t.getDataDimension(data),h=data.getDimensionInfo(l);null!=h&&(o.dimension=h.index,n.push(o))}})),e.getData().setVisual("visualMeta",n)}})},774:function(e,t,n){var o=n(12),r=n(1),l=n(80),h=n(775),c=n(224),d=n(358),v=n(42),f=n(34),m=c.mapVisual,_=c.eachVisual,x=r.isArray,y=r.each,M=f.asc,S=f.linearMap,L=r.noop,V=o.extendComponentModel({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(option,e,t){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(option,t)},optionUpdated:function(e,t){var n=this.option;l.canvasSupported||(n.realtime=!1),!t&&d.replaceVisualOption(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(e){var t=this.stateList;e=r.bind(e,this),this.controllerVisuals=d.createVisualMappings(this.option.controller,t,e),this.targetVisuals=d.createVisualMappings(this.option.target,t,e)},getTargetSeriesIndices:function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries((function(e,n){t.push(n)})):t=v.normalizeToArray(e),t},eachTargetSeries:function(e,t){r.each(this.getTargetSeriesIndices(),(function(n){e.call(t,this.ecModel.getSeriesByIndex(n))}),this)},isTargetSeries:function(e){var t=!1;return this.eachTargetSeries((function(n){n===e&&(t=!0)})),t},formatValueText:function(e,t,n){var o,l,option=this.option,h=option.precision,c=this.dataBound,d=option.formatter;return n=n||["<",">"],r.isArray(e)&&(e=e.slice(),o=!0),l=t?e:o?[v(e[0]),v(e[1])]:v(e),r.isString(d)?d.replace("{value}",o?l[0]:l).replace("{value2}",o?l[1]:l):r.isFunction(d)?o?d(e[0],e[1]):d(e):o?e[0]===c[0]?n[0]+" "+l[1]:e[1]===c[1]?n[1]+" "+l[0]:l[0]+" - "+l[1]:l;function v(e){return e===c[0]?"min":e===c[1]?"max":(+e).toFixed(Math.min(h,20))}},resetExtent:function(){var e=this.option,t=M([e.min,e.max]);this._dataExtent=t},getDataDimension:function(e){var t=this.option.dimension,n=e.dimensions;if(null!=t||n.length){if(null!=t)return e.getDimension(t);for(var o=e.dimensions,i=o.length-1;i>=0;i--){var r=o[i];if(!e.getDimensionInfo(r).isCalculationCoord)return r}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var e=this.ecModel,t=this.option,base={inRange:t.inRange,outOfRange:t.outOfRange},n=t.target||(t.target={}),o=t.controller||(t.controller={});r.merge(n,base),r.merge(o,base);var l=this.isCategory();function d(base){x(t.color)&&!base.inRange&&(base.inRange={color:t.color.slice().reverse()}),base.inRange=base.inRange||{color:e.get("gradientColor")},y(this.stateList,(function(e){var t=base[e];if(r.isString(t)){var n=h.get(t,"active",l);n?(base[e]={},base[e][t]=n):delete base[e]}}),this)}d.call(this,n),d.call(this,o),function(base,e,t){var n=base[e],o=base[t];n&&!o&&(o=base[t]={},y(n,(function(e,t){if(c.isValidType(t)){var n=h.get(t,"inactive",l);null!=n&&(o[t]=n,"color"!==t||o.hasOwnProperty("opacity")||o.hasOwnProperty("colorAlpha")||(o.opacity=[0,0]))}})))}.call(this,n,"inRange","outOfRange"),function(e){var t=(e.inRange||{}).symbol||(e.outOfRange||{}).symbol,n=(e.inRange||{}).symbolSize||(e.outOfRange||{}).symbolSize,o=this.get("inactiveColor");y(this.stateList,(function(h){var c=this.itemSize,d=e[h];d||(d=e[h]={color:l?o:[o]}),null==d.symbol&&(d.symbol=t&&r.clone(t)||(l?"roundRect":["roundRect"])),null==d.symbolSize&&(d.symbolSize=n&&r.clone(n)||(l?c[0]:[c[0],c[0]])),d.symbol=m(d.symbol,(function(symbol){return"none"===symbol||"square"===symbol?"roundRect":symbol}));var v=d.symbolSize;if(null!=v){var f=-1/0;_(v,(function(e){e>f&&(f=e)})),d.symbolSize=m(v,(function(e){return S(e,[0,f],[0,c[0]],!0)}))}}),this)}.call(this,o)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:L,getValueState:L,getVisualMeta:L});e.exports=V},776:function(e,t,n){var o=n(12),r=n(1),l=n(16),h=n(63),c=n(59),d=n(224),v=o.extendComponentView({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(e,t){this.ecModel=e,this.api=t,this.visualMapModel},render:function(e,t,n,o){this.visualMapModel=e,!1!==e.get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(e){var t=this.visualMapModel,n=h.normalizeCssArray(t.get("padding")||0),rect=e.getBoundingRect();e.add(new l.Rect({z2:-1,silent:!0,shape:{x:rect.x-n[3],y:rect.y-n[0],width:rect.width+n[3]+n[1],height:rect.height+n[0]+n[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},getControllerVisual:function(e,t,n){var o=(n=n||{}).forceState,l=this.visualMapModel,h={};if("symbol"===t&&(h.symbol=l.get("itemSymbol")),"color"===t){var c=l.get("contentColor");h.color=c}function v(e){return h[e]}function f(e,t){h[e]=t}var m=l.controllerVisuals[o||l.getValueState(e)],_=d.prepareVisualTypes(m);return r.each(_,(function(o){var r=m[o];n.convertOpacityToAlpha&&"opacity"===o&&(o="colorAlpha",r=m.__alphaForOpacity),d.dependsOn(o,t)&&r&&r.applyVisual(e,v,f)})),h[t]},positionGroup:function(e){var t=this.visualMapModel,n=this.api;c.positionElement(e,t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},doRender:r.noop});e.exports=v},777:function(e,t,n){var o=n(1),r=n(59).getLayoutRect;t.getItemAlign=function(e,t,n){var o=e.option,l=o.align;if(null!=l&&"auto"!==l)return l;for(var h={width:t.getWidth(),height:t.getHeight()},c="horizontal"===o.orient?1:0,d=[["left","right","width"],["top","bottom","height"]],v=d[c],f=[0,null,10],m={},i=0;i<3;i++)m[d[1-c][i]]=f[i],m[v[i]]=2===i?n[0]:o[v[i]];var _=[["x","width",3],["y","height",0]][c],rect=r(m,h,o.padding);return v[(rect.margin[_[2]]||0)+rect[_[0]]+.5*rect[_[1]]<.5*h[_[1]]?0:1]},t.makeHighDownBatch=function(e,t){return o.each(e||[],(function(e){null!=e.dataIndex&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")})),e}},778:function(e,t,n){n(12).registerAction({type:"selectDataRange",event:"dataRangeSelected",update:"update"},(function(e,t){t.eachComponent({mainType:"visualMap",query:e},(function(t){t.setSelected(e.selected)}))}))},779:function(e,t,n){var o=n(12),r=n(771);n(772),n(773),n(1604),n(1605),n(778),o.registerPreprocessor(r)}}]);